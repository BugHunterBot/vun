<%
include("language.html")

if _SESSION["logined"] ~= nil then
	local domain = _GET["domain"] or _POST["domain"]
	local sessionid = _GET["sessionid"] or _POST["sessionid"]
	local statistic = c_GetSessionStatistic(domain,sessionid)
	local sessiontime = c_GetSessionLiveTime(domain,sessionid)

	if sessiontime < 0 then
		sessiontime = 0
	end
	local outstr = ""
	
	if statistic ~= nil then
		outstr = outstr.."<table width='100%' border='0' cellpadding='0' cellspacing='0'><tr><td colspan='2'>"..LANG["str_session_runtime"]..": "..formatTime(sessiontime).."</td></tr><tr><td>"..LANG["str_download_speed"]..": "..formatSpeed(statistic["down_speed"]).."</td><td>"..LANG["str_avg_downspeed"]..": "..formatSpeed(statistic["down_averagespeed"]).."</td></tr>";
		outstr = outstr.."<tr><td>"..LANG["str_total_download"]..": "..formatSize(statistic["down_bytes"]).."</td><td>"..LANG["str_total_downfile"]..": "..statistic["down_files"].." files</td></tr>";
		outstr = outstr.."<tr><td>"..LANG["str_upload_speed"]..": "..formatSpeed(statistic["up_speed"]).."</td><td>"..LANG["str_avg_upspeed"]..": "..formatSpeed(statistic["up_averagespeed"]).."</td></tr>";
		outstr = outstr.."<tr><td>"..LANG["str_total_upload"]..": "..formatSize(statistic["up_bytes"]).."</td><td>"..LANG["str_total_upfile"]..": "..statistic["up_files"].." files</td></tr></table>";
	else
		outstr = outstr.."<table width='100%' border='0' cellpadding='0' cellspacing='0'><tr><td colspan='2'>"..LANG["str_session_runtime"]..": "..formatTime(sessiontime).."</td></tr><tr><td>"..LANG["str_download_speed"]..": 0 KB/s</td><td>"..LANG["str_avg_downspeed"]..": 0 KB/s</td></tr><tr><td>"..LANG["str_total_download"]..": 0 Bytes</td><td>"..LANG["str_total_downfile"]..": 0 files</td></tr><tr><td>"..LANG["str_upload_speed"]..": 0 KB/s</td><td>"..LANG["str_avg_upspeed"]..": 0 KB/s</td></tr><tr><td>"..LANG["str_total_upload"]..": 0 Bytes</td><td>"..LANG["str_total_upfile"]..": 0 files</td></tr></table>";
	end

	print(outstr)
end
%>